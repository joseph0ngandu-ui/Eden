# Production Strategy Configuration
# MA(3,10) Strategy - 5 Bar Hold
# Validated Performance: $1.32M PnL on $100k capital (Aug-Oct 2025)

strategy:
  name: "COMBINED"
  description: "Run MA crossover and ICT/PA hybrid side-by-side on M5 with Risk Ladder compounding"
  version: "0.3.0"
  status: "PRODUCTION"
  ict_pa_config_path: "config/ict_pa.yml"
  use_ma: true
  use_ict_pa: true

parameters:
  fast_ma_period: 3
  slow_ma_period: 10
  timeframe: "M5"
  hold_bars: 5
  entry_signal: "MA crossover (fast > slow)"
  exit_signal: "Fixed 5-bar hold duration"

# Symbols to trade (6 profitable symbols after backtest optimization)
trading_symbols:
  - "Volatility 75 Index"    # $1,229,078 ✓ PRIMARY DRIVER
  - "Volatility 100 Index"   # $28,027 ✓
  - "Boom 1000 Index"        # $17,731 ✓ (marginal, can be removed)
  - "Boom 500 Index"         # $87,321 ✓ SECONDARY DRIVER
  - "Crash 500 Index"        # $36,948 ✓ (highest win rate 57.3%)
  - "XAUUSD"                 # $23,681 ✓ DIVERSIFICATION
  # REMOVED (Unprofitable, backtest losses):
  # - "Volatility 50 Index"   # -$869.91 ✗
  # - "Volatility 25 Index"   # -$59,924.50 ✗ (MAJOR LOSS)
  # - "Step Index"            # -$20,220.00 ✗
  # - "Crash 1000 Index"      # -$18,640.80 ✗

# Historical Performance (Backtested Aug 1 - Oct 31, 2025)
performance:
  total_trades: 13820
  total_pnl: 1323131.69
  winning_trades: 6884
  losing_trades: 6918
  breakeven_trades: 18
  win_rate: 49.8
  return_percent: 1323.13
  profit_factor: 1.09
  avg_win: 192.33
  avg_loss: -191.39
  max_profit: 6835.93
  min_profit: -8421.98

# Top Performing Symbols
top_performers:
  - symbol: "Volatility 75 Index"
    trades: 1420
    pnl: 1229078.00
    win_rate: 49.9
  - symbol: "Boom 500 Index"
    trades: 1403
    pnl: 87321.00
    win_rate: 46.8
  - symbol: "Crash 500 Index"
    trades: 1395
    pnl: 36948.40
    win_rate: 57.3

# Risk Management
risk_management:
  position_size: 1.0  # 1 lot per trade (base, overridden by growth_mode if enabled)
  max_concurrent_positions: 10
  max_drawdown_percent: 10.0  # Auto-disable live trading when breached
  max_daily_loss_percent: 5.0  # Max daily loss percentage
  stop_loss_pips: null  # Not used - fixed hold exit
  take_profit_pips: null  # Not used - fixed hold exit

# Growth Mode - Risk Ladder & Dynamic Position Sizing
growth_mode:
  enabled: true  # Enable tier-based risk scaling
  high_aggression_below: 30  # $30 - switch to less aggressive at this balance
  equity_step_size: 50  # Create new equity milestone every $50
  equity_step_drawdown_limit: 0.15  # Reduce risk if drawdown > 15% from step high
  
  # Risk tiers - automatically adjusts as balance grows
  # Tier 1: $10-$30 (ultra aggressive - 20% risk per trade)
  # Tier 2: $30-$100 (very aggressive - 10% risk per trade)
  # Tier 3: $100-$500 (aggressive - 5% risk per trade)
  # Tier 4: $500-$1000 (moderate - 3% risk per trade)
  # Tier 5: $1000+ (conservative - 1% risk per trade)
  
  # Position sizing method
  lot_sizing: "atr_based"  # Options: "simple", "atr_based", "equity_based"
  pip_value: 10  # Value per pip for lot calculation

# Backtest Configuration
backtest:
  start_date: "2025-08-01"
  end_date: "2025-10-31"
  timeframe: "M5"
  data_source: "MT5"

# Live Trading Configuration
live_trading:
  enabled: true
  check_interval: 300  # seconds (5 minutes - aligns with M5 timeframe)
  symbols: ${trading_symbols}
  position_size: 1.0  # lots
  
# Logging
logging:
  level: "INFO"
  format: "%(asctime)s - %(levelname)s - %(message)s"
  file: "logs/trading.log"
